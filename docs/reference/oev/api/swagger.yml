# This file was autogenerated. Do not edit it manually.
openapi: 3.0.3
info:
  version: 1.0.0
  title: OEV relay API
  description: The API for making requests to OEV relay.
servers:
  - url: /api
tags:
  - name: API
components:
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Brief description of the error.
          example: Validation error
        context:
          description: Optional additional context for the error - for example validation errors.
          example: <valid-json-with-any-structure>
      required:
        - error
      additionalProperties: false
    ConfigurationResponse:
      type: object
      properties:
        proxies:
          type: array
          items:
            type: object
            properties:
              address:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description: The address of the proxy.
              chainId:
                type: integer
                minimum: 0
                exclusiveMinimum: true
                description: The chain ID associated with the proxy's chain.
                example: 1
              auctionDelayTime:
                type: integer
                minimum: 0
                description:
                  The minimum delay, in milliseconds, between the end of an auction and the start of the next one.
                example: 10000
              updatePeriod:
                type: integer
                minimum: 0
                description:
                  The maximum duration, in milliseconds, a searcher has after winning an auction to execute an update.
                  Otherwise, they are slashed.
                example: 10000
              minimalBidValue:
                type: string
                pattern: ^\d+$
                description: The minimum native currency amount required for bids created for this proxy.
                example: '50000000000000000'
              minimalConfirmations:
                type: integer
                minimum: 0
                description:
                  The minimum number of block confirmations needed to process events on the chain associated with this
                  proxy.
                example: 10
            required:
              - address
              - chainId
              - auctionDelayTime
              - updatePeriod
              - minimalBidValue
              - minimalConfirmations
      required:
        - proxies
      additionalProperties: false
    CancelBidRequest:
      type: object
      properties:
        requestType:
          type: string
          enum:
            - API3 OEV Relay, cancel-bid
          description: The type of request, which is used to identify the specific operation being performed.
        id:
          type: string
          format: uuid
          description: Bid ID to cancel.
        searcherAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the searcher.
        validUntil:
          type: string
          description: The serialized date time (ISO 8601 format) until which the authentication is valid.
          example: 2023-06-03T16:43:39.000Z
        prepaymentDepositoryChainId:
          type: integer
          minimum: 0
          exclusiveMinimum: true
          description: The chain ID associated with the chain of the prepayment depository.
          example: 1
        prepaymentDepositoryAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the prepayment depository contract.
        signature:
          type: string
          description: Signature of the authentication request using EIP-191.
          example: '0x21940805289d45833e2e589f41be30d5044c8bfa50060d43b69a3bebf5102264687a4d1c78386f8c519d2eb7b9b30868a8c1a600b80da0bc7978bfdfb52799b11b'
      required:
        - requestType
        - id
        - searcherAddress
        - validUntil
        - prepaymentDepositoryChainId
        - prepaymentDepositoryAddress
        - signature
      additionalProperties: false
    CancelBidResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID of the cancelled bid.
      required:
        - id
    PlaceBidRequest:
      type: object
      properties:
        requestType:
          type: string
          enum:
            - API3 OEV Relay, place-bid
          description: The type of request, which is used to identify the specific operation being performed.
        bidAmount:
          type: string
          pattern: ^\d+$
          description: The amount to bid in the native currency.
        dAppProxyAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: The address of the proxy.
        dAppProxyChainId:
          type: integer
          minimum: 0
          exclusiveMinimum: true
          description: The chain ID associated with the proxy's chain.
          example: 1
        condition:
          type: string
          enum:
            - GTE
            - LTE
          description: Specifies the condition of which the bid should be filled.
        fulfillmentValue:
          type: string
          pattern: ^\d+$
          description:
            The target fulfillment value of the request. This value is used to determine whether the bid is filled.
        updateExecutorAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description:
            The address of the update executor that must be used to submit the data feed update in case the bid is
            fulfilled.
        searcherAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the searcher.
        validUntil:
          type: string
          description: The serialized date time (ISO 8601 format) until which the authentication is valid.
          example: 2023-06-03T16:43:39.000Z
        prepaymentDepositoryChainId:
          type: integer
          minimum: 0
          exclusiveMinimum: true
          description: The chain ID associated with the chain of the prepayment depository.
          example: 1
        prepaymentDepositoryAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the prepayment depository contract.
        signature:
          type: string
          description: Signature of the authentication request using EIP-191.
          example: '0x21940805289d45833e2e589f41be30d5044c8bfa50060d43b69a3bebf5102264687a4d1c78386f8c519d2eb7b9b30868a8c1a600b80da0bc7978bfdfb52799b11b'
      required:
        - requestType
        - bidAmount
        - dAppProxyAddress
        - dAppProxyChainId
        - condition
        - fulfillmentValue
        - updateExecutorAddress
        - searcherAddress
        - validUntil
        - prepaymentDepositoryChainId
        - prepaymentDepositoryAddress
        - signature
      additionalProperties: false
    PlaceBidResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID assigned to the created bid.
      required:
        - id
    WithdrawRequest:
      type: object
      properties:
        requestType:
          type: string
          enum:
            - API3 OEV Relay, withdraw
          description: The type of request, which is used to identify the specific operation being performed.
        searcherAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the searcher.
        validUntil:
          type: string
          description: The serialized date time (ISO 8601 format) until which the authentication is valid.
          example: 2023-06-03T16:43:39.000Z
        prepaymentDepositoryChainId:
          type: integer
          minimum: 0
          exclusiveMinimum: true
          description: The chain ID associated with the chain of the prepayment depository.
          example: 1
        prepaymentDepositoryAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the prepayment depository contract.
        signature:
          type: string
          description: Signature of the authentication request using EIP-191.
          example: '0x21940805289d45833e2e589f41be30d5044c8bfa50060d43b69a3bebf5102264687a4d1c78386f8c519d2eb7b9b30868a8c1a600b80da0bc7978bfdfb52799b11b'
      required:
        - requestType
        - searcherAddress
        - validUntil
        - prepaymentDepositoryChainId
        - prepaymentDepositoryAddress
        - signature
      additionalProperties: false
    WithdrawResponse:
      type: object
      properties:
        withdrawalHash:
          type: string
          description: The hash of the withdrawal transaction.
          example: '0x8ca0c0f398d7cb09c117d21f768db9af62388eb7812b888bdcd6a9317995637b'
        amount:
          type: string
          pattern: ^\d+$
          description: The USDC amount to withdraw.
          example: '94014418'
        signature:
          type: string
          description: The signature associated with the withdrawal transaction.
          example: '0x060c83e0c74a3278b86499895932abf24ebe699675430d74ab59af2a5b910d6d3b3db96470c5647f2de56d81d6640e6935e2b3c6c9e80d583d24391f2714da9e1b'
        expirationTimestamp:
          type: string
          description: The timestamp after which the withdrawal transaction becomes invalid.
          example: '1682684178'
        signer:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: The address of the OEV relay account that signed the withdrawal transaction.
          example: '0x7a9f3cd060ab180f36c17fe6bdf9974f577d77aa'
      required:
        - withdrawalHash
        - amount
        - signature
        - expirationTimestamp
        - signer
    StatusRequest:
      type: object
      properties:
        requestType:
          type: string
          enum:
            - API3 OEV Relay, status
          description: The type of request, which is used to identify the specific operation being performed.
        searcherAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the searcher.
        validUntil:
          type: string
          description: The serialized date time (ISO 8601 format) until which the authentication is valid.
          example: 2023-06-03T16:43:39.000Z
        prepaymentDepositoryChainId:
          type: integer
          minimum: 0
          exclusiveMinimum: true
          description: The chain ID associated with the chain of the prepayment depository.
          example: 1
        prepaymentDepositoryAddress:
          type: string
          pattern: ^0x[a-fA-F0-9]{40}$
          description: Address of the prepayment depository contract.
        signature:
          type: string
          description: Signature of the authentication request using EIP-191.
          example: '0x21940805289d45833e2e589f41be30d5044c8bfa50060d43b69a3bebf5102264687a4d1c78386f8c519d2eb7b9b30868a8c1a600b80da0bc7978bfdfb52799b11b'
      required:
        - requestType
        - searcherAddress
        - validUntil
        - prepaymentDepositoryChainId
        - prepaymentDepositoryAddress
        - signature
      additionalProperties: false
    StatusResponse:
      type: object
      properties:
        availableFunds:
          type: string
          pattern: ^\d+$
          description: The USDC amount available for evaluating bids.
        withdrawalReservedFunds:
          type: string
          pattern: ^\d+$
          description: The USDC amount reserved for currently pending withdrawals.
          example: '94014418'
        bidReservedFunds:
          type: string
          pattern: ^\d+$
          description: The USDC amount reserved for unexecuted pending auctions.
          example: '0'
        api3FeeFunds:
          type: string
          pattern: ^\d+$
          description: The USDC amount reserved for API3 fees.
          example: '5985582'
        slashedFunds:
          type: string
          pattern: ^\d+$
          description: The USDC amount for slashed bids.
          example: '0'
        pendingWithdrawals:
          type: array
          items:
            type: object
            properties:
              withdrawalHash:
                type: string
                description: The hash of the withdrawal transaction.
                example: '0x8ca0c0f398d7cb09c117d21f768db9af62388eb7812b888bdcd6a9317995637b'
              amount:
                type: string
                pattern: ^\d+$
                description: The USDC amount to withdraw.
                example: '94014418'
              signature:
                type: string
                description: The signature associated with the withdrawal transaction.
                example: '0x060c83e0c74a3278b86499895932abf24ebe699675430d74ab59af2a5b910d6d3b3db96470c5647f2de56d81d6640e6935e2b3c6c9e80d583d24391f2714da9e1b'
              expirationTimestamp:
                type: string
                description: The timestamp after which the withdrawal transaction becomes invalid.
                example: '1682684178'
              signer:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description: The address of the OEV relay account that signed the withdrawal transaction.
                example: '0x7a9f3cd060ab180f36c17fe6bdf9974f577d77aa'
            required:
              - withdrawalHash
              - amount
              - signature
              - expirationTimestamp
              - signer
        bids:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                description: The ID of the bid.
              dAppProxyAddress:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description: The address of the proxy.
              dAppProxyChainId:
                type: integer
                minimum: 0
                exclusiveMinimum: true
                description: The chain ID associated with the proxy's chain.
                example: 1
              bidAmount:
                type: string
                pattern: ^\d+$
                description: The native currency amount of the bid.
                example: '50000000000000000'
              reservedAmount:
                type: string
                pattern: ^\d+$
                description: The USDC amount reserved for this bid. Present only if the bid is filled.
                example: '5985582'
              api3Fee:
                type: string
                pattern: ^\d+$
                description:
                  The USDC amount reserved as a service fee for the API3 DAO. Present only when the bid is filled.
                example: '5985582'
              condition:
                type: string
                enum:
                  - GTE
                  - LTE
                description: Specifies the condition under which the bid should be filled.
              fulfillmentValue:
                type: string
                pattern: ^\d+$
                description:
                  The target fulfillment value of the request. This value is used to determine whether the bid is
                  filled.
                example: '1000000000000000000'
              status:
                type: string
                enum:
                  - PENDING
                  - WON
                  - EXECUTED
                  - SLASHED
                  - SEARCHER_CANCELED
                  - RELAY_CANCELED
                  - FRONTRUN
                  - EXPIRED
                description: The status of the bid.
              updateTxHash:
                type: string
                nullable: true
                description: The hash of the update transaction. Present only if the update transaction is executed.
                example: '0xeec81c7fd9fd7d5a79a029b4c9df8296fa86176aa040c8041cde873e9609cb0e'
              createdAt:
                type: string
                description: The serialized date time (ISO 8601 format) of the bid creation.
                example: 2023-04-26T10:31:15.000Z
              updateExecutorAddress:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description:
                  The address of the update executor that must be used to submit the data feed update in case the bid is
                  fulfilled.
            required:
              - id
              - dAppProxyAddress
              - dAppProxyChainId
              - bidAmount
              - condition
              - fulfillmentValue
              - status
              - updateTxHash
              - createdAt
              - updateExecutorAddress
        executableAuctions:
          type: array
          items:
            type: object
            properties:
              winningBidIds:
                type: array
                items:
                  type: string
                  format: uuid
                  description: The ID of the winning bids.
              nativeCurrencyAmount:
                type: string
                pattern: ^\d+$
                description: The total native currency amount of all filled bids in this auction.
                example: '50000000000000000'
              encodedUpdateTransaction:
                type: string
                description: The encoded update transaction that updates the data feed.
                example: '0xe6ec76ac0000000000000000000000009e53700c4d0ac80eec58eaf381e2c11400c9298959a9a65cde2e07d241e9c6256e41ab5ea0420f56b4bb4993a1e48d32ced39c0d87e84db0e1ed32e09014ca66c728cb58643f044ece7e726bfe184f4d43ed2b1600000000000000000000000000000000000000000000000000000000644ba07400000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000006bd991fe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000008009ccf21cd961e6f39152bc5e50cb5c78692d40ff6d0c81da86440389baedc8943ab0d2a3b4deb5cba51f7be0433117832e3c41000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000417e72aa05cf8854bba7a303facffe5885e17d08d90f156fb68a794a94426012f427b5005f6dc9fe415e8ba961bf06b143ff43340feee2fe73f4dd9f6ea6d32eff1b00000000000000000000000000000000000000000000000000000000000000'
              decodedValue:
                type: string
                pattern: ^\d+$
                description: The decoded value of the data feed used for informational purposes.
                example: '1809420798'
              updatePeriodEnd:
                type: string
                description: The serialized date time (ISO 8601 format) of the end of the update period.
                example: 2023-04-28T10:36:16.000Z
              collateralPercentage:
                type: integer
                minimum: 0
                description: The percentage of the accumulated bid amount that is reserved for auction as collateral.
                example: 10
              api3FeePercentage:
                type: integer
                minimum: 0
                description: The percentage of the accumulated bid amount that is paid to the API3 as service fee.
                example: 10
              exchangeRate:
                type: number
                description: The exchange rate of the native currency to USDC.
                example: 1197.1164620063
              updateExecutorAddress:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description:
                  The address of the update executor that must be used to submit the data feed update in case the bid is
                  fulfilled.
            required:
              - winningBidIds
              - nativeCurrencyAmount
              - encodedUpdateTransaction
              - decodedValue
              - updatePeriodEnd
              - collateralPercentage
              - api3FeePercentage
              - exchangeRate
              - updateExecutorAddress
        pastAuctions:
          type: array
          items:
            type: object
            properties:
              winningBidIds:
                type: array
                items:
                  type: string
                  format: uuid
                  description: The ID of the winning bids.
              nativeCurrencyAmount:
                type: string
                pattern: ^\d+$
                description: The total native currency amount of all filled bids in this auction.
                example: '50000000000000000'
              encodedUpdateTransaction:
                type: string
                description: The encoded update transaction that updates the data feed.
                example: '0xe6ec76ac0000000000000000000000009e53700c4d0ac80eec58eaf381e2c11400c9298959a9a65cde2e07d241e9c6256e41ab5ea0420f56b4bb4993a1e48d32ced39c0d87e84db0e1ed32e09014ca66c728cb58643f044ece7e726bfe184f4d43ed2b1600000000000000000000000000000000000000000000000000000000644ba07400000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000006bd991fe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000008009ccf21cd961e6f39152bc5e50cb5c78692d40ff6d0c81da86440389baedc8943ab0d2a3b4deb5cba51f7be0433117832e3c41000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000417e72aa05cf8854bba7a303facffe5885e17d08d90f156fb68a794a94426012f427b5005f6dc9fe415e8ba961bf06b143ff43340feee2fe73f4dd9f6ea6d32eff1b00000000000000000000000000000000000000000000000000000000000000'
              decodedValue:
                type: string
                pattern: ^\d+$
                description: The decoded value of the data feed used for informational purposes.
                example: '1809420798'
              updatePeriodEnd:
                type: string
                description: The serialized date time (ISO 8601 format) of the end of the update period.
                example: 2023-04-28T10:36:16.000Z
              collateralPercentage:
                type: integer
                minimum: 0
                description: The percentage of the accumulated bid amount that is reserved for auction as collateral.
                example: 10
              api3FeePercentage:
                type: integer
                minimum: 0
                description: The percentage of the accumulated bid amount that is paid to the API3 as service fee.
                example: 10
              exchangeRate:
                type: number
                description: The exchange rate of the native currency to USDC.
                example: 1197.1164620063
              updateExecutorAddress:
                type: string
                pattern: ^0x[a-fA-F0-9]{40}$
                description:
                  The address of the update executor that must be used to submit the data feed update in case the bid is
                  fulfilled.
            required:
              - winningBidIds
              - nativeCurrencyAmount
              - encodedUpdateTransaction
              - decodedValue
              - updatePeriodEnd
              - collateralPercentage
              - api3FeePercentage
              - exchangeRate
              - updateExecutorAddress
      required:
        - availableFunds
        - withdrawalReservedFunds
        - bidReservedFunds
        - api3FeeFunds
        - slashedFunds
        - pendingWithdrawals
        - bids
        - executableAuctions
        - pastAuctions
  parameters: {}
paths:
  /configuration:
    get:
      tags:
        - API
      description:
        Returns the present values of settings that are determined by relay operators for every distinct OEV proxy. It
        is essential for searchers to frequently observe these values to ensure compliance with the OEV relay
        guidelines.
      summary: Returns the OEV relay configuration.
      responses:
        '200':
          description: Operation successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfigurationResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /place-bid:
    post:
      tags:
        - API
      description: Places a bid in anticipation of an OEV opportunity on a specific data feed/chain.
      summary: Places a bid.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlaceBidRequest'
      responses:
        '200':
          description: Bid successfully placed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlaceBidResponse'
        '400':
          description: Bid cannot be placed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Proxy or searcher not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /cancel-bid:
    post:
      tags:
        - API
      description: Cancels specific bid request associated with the bid ID.
      summary: Cancels bid.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelBidRequest'
      responses:
        '200':
          description: Bid successfully canceled.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancelBidResponse'
        '400':
          description: Bid cannot be canceled.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Bid or searcher not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /withdraw:
    post:
      tags:
        - API
      description:
        Initiates a withdrawal from a designated prepayment depository contract and its associated chain ID. Be aware
        that the provided signature for withdrawal will only remain valid for a limited period.
      summary: Requests a withdrawal.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WithdrawRequest'
      responses:
        '200':
          description: Withdrawal request successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WithdrawResponse'
        '400':
          description: Withdrawal cannot be requested.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Proxy or searcher not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /status:
    post:
      tags:
        - API
      description:
        Returns essential information regarding a searcher's account. To confirm the validity of your bids or
        withdrawals, regularly query this endpoint to monitor the status of your collateral. If you have active bids,
        consistently polling this endpoint will keep you informed about the fulfillment or cancellation of your bids.
      summary: Returns information about searcher.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatusRequest'
      responses:
        '200':
          description: Request successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusResponse'
        '400':
          description: Status cannot be retrieved.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Searcher not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
